# 变量的作用域/生命周期/修饰符

## 作用域

某事物**起作用或有效**的区域，称为作用域。

- {}是作用域限定符
- {}以内的区域称作局部作用域
- {}以外的称为全局作用域

### 局部变量

- {}以内的变量称为局部变量（形式参数也为局部变量）。

- 其作用域起始于定义处，终止于所在的大括号。

- **局部变量未赋值时，其值是随机的**。

### 全局变量

- 凡是{}以外的变量，都是全局变量。
- 其作用域起始于定义处，截止于**本文件**结束。
- **若全局变量未赋值，系统将其初始化为 零**。
- 在多文件编程中，**可以通过extern声明的方式，将作用域扩展到其它文件中**。

### 作用域叠加问题

- 小范围作用域和大范围作用域**出现叠加**，且具有**重名变量**时，**小范围**作用域内的变量名会**覆盖大范围**作用域的变量名（强龙不压地头蛇）。
- 避免全局变量污染

## 生命周期

### 局部变量

- 局部变量生命周期，同其所在的函数。
- main函数中的局部变量的生命周同main函数或同进程。

### 全局变量

- 全局变量的生命周期同进程，或是main函数或进程。

## 修饰符

### auto

- 只能修饰局部变量，可以省略，局部变量若无其他修饰，则默认auto。
- 特点：随用随开，用完即消。

### register

- 只能修饰局部变量，将内存中的变量升级到CPU寄存器中存储，加快访问速度。
- CPU寄存器数量有限，通常会在程序优化阶段，被优化为普通auto类型。

### extern

- 只能修饰全局变量。
- 全局变量本身是全局可用的。C语言，是单文件编译，然后再将编译的.o文件同库一起链接成可执行性文件。所以当跨文件使用全局变量时，**需要声明**！
- **经extern声明的变量，不可以再初始化**。
- extern是可以省略的，但不推荐！

### static

#### 修饰局部变量

- 修改局部变量的生命周期，使局部变量生命周期同进程或main函数
- static变量若未初始化，**则系统初始化为0**，**static变量的初始化只执行一次**。
- 可以用来控制流程，还可用于统计函数或加载资源文件。

#### 修饰全局变量

- 全局变量拥有外延性，可被其他文件所用，extern。

- C语言避免全局变量污染，用static修饰全局变量，限制其外延性，使其只能用于本文件。
- C++提供了命名空间来解决此类问题。
- 也可以修饰全局函数达到同样目的。

